namespace Net.HTTP {
	func request(url: str, action: str): obj {
		temporary out: obj;
		fatal asm {
			copy move stack[-2] -> reg[0]
			copy move stack[-1] -> reg[1]
			copy move "" -> reg[2]
			call in http
		}
		return move out;
	}

	func request(url: str, action: str, data: obj): obj {
		temporary out: obj;
		fatal asm {
			copy move stack[-2] -> reg[0]
			copy move stack[-1] -> reg[1]
			copy move stack[-0] -> reg[2]
			call in http
		}
		return move out;
	}

	macro declare => {$type:id : $req:string;} => {
		macro $type ${
			${$$url:string;$}				=> ${core.Net.HTTP.request($$url, $req);			$}
			${$$url:string = $$data:expr;$}	=> ${core.Net.HTTP.request($$url, $req, $$data);	$}
		$}
	}

	declare get:	"GET";
	declare post:	"POST";
	declare put:	"PUT";
	declare patch:	"PATCH";
	declare update:	"UPDATE";
	declare delete:	"DELETE";
	declare head:	"HEAD";
}
