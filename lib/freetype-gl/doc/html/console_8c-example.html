<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Freetype OpenGL: console.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<body>
<div id="content"><!-- do not remove this div! -->
<div id="top"><!-- do not remove this div! -->
  <div id="titlearea">
    <div id="projectname">Freetype OpenGL</div>
    <div id="projectbrief">A high quality OpenGL text rendering engine for C</div>
  </div>
<!--
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Freetype OpenGL
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A high quality OpenGL text rendering engine for C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
-->
<!-- Generated by Doxygen 1.9.5 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">console.c</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* Freetype GL - A C OpenGL Freetype engine</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Distributed under the OSI-approved BSD 2-Clause License.  See accompanying</span></div>
<div class="line"><span class="comment"> * file `LICENSE` for more details.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;freetype-gl.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="vertex-buffer_8h.html">vertex-buffer.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="markup_8h.html">markup.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;shader.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;mat4.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;screenshot-util.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;GLFW/glfw3.h&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// -------------------------------------------------------------- constants ---</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> __SIGNAL_ACTIVATE__     = 0;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> __SIGNAL_COMPLETE__     = 1;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> __SIGNAL_HISTORY_NEXT__ = 2;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> __SIGNAL_HISTORY_PREV__ = 3;</div>
<div class="line"><span class="preprocessor">#define MAX_LINE_LENGTH  511</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_NORMAL      = 0;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_DEFAULT     = 0;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_ERROR       = 1;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_WARNING     = 2;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_OUTPUT      = 3;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_BOLD        = 4;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_ITALIC      = 5;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_BOLD_ITALIC = 6;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MARKUP_FAINT       = 7;</div>
<div class="line"><span class="preprocessor">#define   MARKUP_COUNT         8</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- typedef &amp; struct ---</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keywordtype">float</span> x, y, z;</div>
<div class="line">    <span class="keywordtype">float</span> s, t;</div>
<div class="line">    <span class="keywordtype">float</span> r, g, b, a;</div>
<div class="line">} vertex_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>_console_t {</div>
<div class="line">    <a id="_a0" name="_a0"></a><a class="code hl_struct" href="structvector__t.html">vector_t</a> *     lines;</div>
<div class="line">    <span class="keywordtype">char</span> *prompt;</div>
<div class="line">    <span class="keywordtype">char</span> killring[MAX_LINE_LENGTH+1];</div>
<div class="line">    <span class="keywordtype">char</span> input[MAX_LINE_LENGTH+1];</div>
<div class="line">    <span class="keywordtype">size_t</span>         cursor;</div>
<div class="line">    <a id="_a1" name="_a1"></a><a class="code hl_struct" href="structmarkup__t.html">markup_t</a>       markup[MARKUP_COUNT];</div>
<div class="line">    <a id="_a2" name="_a2"></a><a class="code hl_struct" href="structvertex__buffer__t.html">vertex_buffer_t</a> * buffer;</div>
<div class="line">    <a id="_a3" name="_a3"></a><a class="code hl_struct" href="structtexture__atlas__t.html">texture_atlas_t</a> *atlas;</div>
<div class="line">    <a id="_a4" name="_a4"></a><a class="code hl_union" href="unionvec2.html">vec2</a>           pen;</div>
<div class="line">    void (*handlers[4])( <span class="keyword">struct </span>_console_t *, <span class="keywordtype">char</span> * );</div>
<div class="line">};</div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>_console_t console_t;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- global variables ---</span></div>
<div class="line"><span class="keyword">static</span> console_t * console;</div>
<div class="line">GLuint shader;</div>
<div class="line">mat4   model, view, projection;</div>
<div class="line"><span class="keywordtype">int</span> control_key_handled;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------------ console_new ---</span></div>
<div class="line">console_t *</div>
<div class="line">console_new( <span class="keywordtype">float</span> font_size )</div>
<div class="line">{</div>
<div class="line">    console_t *self = (console_t *) malloc( <span class="keyword">sizeof</span>(console_t) );</div>
<div class="line">    <span class="keywordflow">if</span>( !self )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> self;</div>
<div class="line">    }</div>
<div class="line">    self-&gt;lines = <a id="a5" name="a5"></a><a class="code hl_function" href="group__vector.html#ga26e06c009f42cd16a41a8d33ef005e97">vector_new</a>( <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) );</div>
<div class="line">    self-&gt;prompt = strdup( <span class="stringliteral">&quot;&gt;&gt;&gt; &quot;</span> );</div>
<div class="line">    self-&gt;cursor = 0;</div>
<div class="line">    self-&gt;buffer = <a id="a6" name="a6"></a><a class="code hl_function" href="group__vertex-buffer.html#gafb2ecb5aaa71db813080295b9fd06098">vertex_buffer_new</a>( <span class="stringliteral">&quot;vertex:3f,tex_coord:2f,color:4f&quot;</span> );</div>
<div class="line">    self-&gt;input[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">    self-&gt;killring[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">    self-&gt;handlers[__SIGNAL_ACTIVATE__]     = 0;</div>
<div class="line">    self-&gt;handlers[__SIGNAL_COMPLETE__]     = 0;</div>
<div class="line">    self-&gt;handlers[__SIGNAL_HISTORY_NEXT__] = 0;</div>
<div class="line">    self-&gt;handlers[__SIGNAL_HISTORY_PREV__] = 0;</div>
<div class="line">    self-&gt;pen.x = self-&gt;pen.y = 0;</div>
<div class="line"> </div>
<div class="line">    self-&gt;atlas = <a id="a7" name="a7"></a><a class="code hl_function" href="group__texture-atlas.html#ga92a71345a425496a07143068a99d8a0b">texture_atlas_new</a>( 512, 512, 1 );</div>
<div class="line">    glGenTextures( 1, &amp;self-&gt;atlas-&gt;id );</div>
<div class="line"> </div>
<div class="line">    <a id="_a8" name="_a8"></a><a class="code hl_union" href="unionvec4.html">vec4</a> white = {{1,1,1,1}};</div>
<div class="line">    <a class="code hl_union" href="unionvec4.html">vec4</a> black = {{0,0,0,1}};</div>
<div class="line">    <a class="code hl_union" href="unionvec4.html">vec4</a> none = {{0,0,1,0}};</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> normal;</div>
<div class="line">    normal.<a id="a9" name="a9"></a><a class="code hl_variable" href="structmarkup__t.html#adcb67782935faf6178ef7afde350ca2a">family</a>  = <span class="stringliteral">&quot;fonts/VeraMono.ttf&quot;</span>;</div>
<div class="line">    normal.<a id="a10" name="a10"></a><a class="code hl_variable" href="structmarkup__t.html#a32a7c723e03431ac36ce55a7806783d7">size</a>    = font_size;</div>
<div class="line">    normal.<a id="a11" name="a11"></a><a class="code hl_variable" href="structmarkup__t.html#a2f3767ea0ddd6e83154daad12cc4d2d0">bold</a>    = 0;</div>
<div class="line">    normal.<a id="a12" name="a12"></a><a class="code hl_variable" href="structmarkup__t.html#a343eab20b2c5cb225e4b9969bd034642">italic</a>  = 0;</div>
<div class="line">    normal.<a id="a13" name="a13"></a><a class="code hl_variable" href="structmarkup__t.html#af41c01f5a6be19a30d81a07423186177">spacing</a> = 0.0;</div>
<div class="line">    normal.<a id="a14" name="a14"></a><a class="code hl_variable" href="structmarkup__t.html#a37164c55ed3ed10f00ce0b2da6b9d2f5">gamma</a>   = 1.0;</div>
<div class="line">    normal.<a id="a15" name="a15"></a><a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>    = black;</div>
<div class="line">    normal.<a id="a16" name="a16"></a><a class="code hl_variable" href="structmarkup__t.html#a188c090aade110f71252dd3f28a4b9c7">background_color</a>    = none;</div>
<div class="line">    normal.<a id="a17" name="a17"></a><a class="code hl_variable" href="structmarkup__t.html#a84af8287dddba1d14190dd33f76af955">underline</a>           = 0;</div>
<div class="line">    normal.<a id="a18" name="a18"></a><a class="code hl_variable" href="structmarkup__t.html#a1a14c4fb87e2224381288a24f56526c8">underline_color</a>     = white;</div>
<div class="line">    normal.<a id="a19" name="a19"></a><a class="code hl_variable" href="structmarkup__t.html#a678b7a967e3d8bf13400ed72216f7f88">overline</a>            = 0;</div>
<div class="line">    normal.<a id="a20" name="a20"></a><a class="code hl_variable" href="structmarkup__t.html#a0ed25bfa8bc6ead84ae5c0e31dadc780">overline_color</a>      = white;</div>
<div class="line">    normal.<a id="a21" name="a21"></a><a class="code hl_variable" href="structmarkup__t.html#a78e8996a06c5bce517be27cf7339c97c">strikethrough</a>       = 0;</div>
<div class="line">    normal.<a id="a22" name="a22"></a><a class="code hl_variable" href="structmarkup__t.html#a29192ea5e970414c0f2b6596e04b822c">strikethrough_color</a> = white;</div>
<div class="line"> </div>
<div class="line">    normal.<a id="a23" name="a23"></a><a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a> = <a id="a24" name="a24"></a><a class="code hl_function" href="group__texture-font.html#ga329116810bb25cd8964430f5477d90d6">texture_font_new_from_file</a>( self-&gt;atlas, font_size, <span class="stringliteral">&quot;fonts/VeraMono.ttf&quot;</span> );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> bold = normal;</div>
<div class="line">    bold.<a class="code hl_variable" href="structmarkup__t.html#a2f3767ea0ddd6e83154daad12cc4d2d0">bold</a> = 1;</div>
<div class="line">    bold.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a> = <a class="code hl_function" href="group__texture-font.html#ga329116810bb25cd8964430f5477d90d6">texture_font_new_from_file</a>( self-&gt;atlas, font_size, <span class="stringliteral">&quot;fonts/VeraMoBd.ttf&quot;</span> );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> italic = normal;</div>
<div class="line">    italic.<a class="code hl_variable" href="structmarkup__t.html#a343eab20b2c5cb225e4b9969bd034642">italic</a> = 1;</div>
<div class="line">    bold.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a> = <a class="code hl_function" href="group__texture-font.html#ga329116810bb25cd8964430f5477d90d6">texture_font_new_from_file</a>( self-&gt;atlas, font_size, <span class="stringliteral">&quot;fonts/VeraMoIt.ttf&quot;</span> );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> bold_italic = normal;</div>
<div class="line">    bold.<a class="code hl_variable" href="structmarkup__t.html#a2f3767ea0ddd6e83154daad12cc4d2d0">bold</a> = 1;</div>
<div class="line">    italic.<a class="code hl_variable" href="structmarkup__t.html#a343eab20b2c5cb225e4b9969bd034642">italic</a> = 1;</div>
<div class="line">    italic.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a> = <a class="code hl_function" href="group__texture-font.html#ga329116810bb25cd8964430f5477d90d6">texture_font_new_from_file</a>( self-&gt;atlas, font_size, <span class="stringliteral">&quot;fonts/VeraMoBI.ttf&quot;</span> );</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> faint = normal;</div>
<div class="line">    faint.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a id="a25" name="a25"></a><a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a> = 0.35;</div>
<div class="line">    faint.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a id="a26" name="a26"></a><a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a> = 0.35;</div>
<div class="line">    faint.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a id="a27" name="a27"></a><a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a> = 0.35;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> error = normal;</div>
<div class="line">    error.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a> = 1.00;</div>
<div class="line">    error.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a> = 0.00;</div>
<div class="line">    error.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a> = 0.00;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> warning = normal;</div>
<div class="line">    warning.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a> = 1.00;</div>
<div class="line">    warning.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a> = 0.50;</div>
<div class="line">    warning.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a> = 0.50;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> output = normal;</div>
<div class="line">    output.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a> = 0.00;</div>
<div class="line">    output.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a> = 0.00;</div>
<div class="line">    output.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a> = 1.00;</div>
<div class="line"> </div>
<div class="line">    self-&gt;markup[MARKUP_NORMAL] = normal;</div>
<div class="line">    self-&gt;markup[MARKUP_ERROR] = error;</div>
<div class="line">    self-&gt;markup[MARKUP_WARNING] = warning;</div>
<div class="line">    self-&gt;markup[MARKUP_OUTPUT] = output;</div>
<div class="line">    self-&gt;markup[MARKUP_FAINT] = faint;</div>
<div class="line">    self-&gt;markup[MARKUP_BOLD] = bold;</div>
<div class="line">    self-&gt;markup[MARKUP_ITALIC] = italic;</div>
<div class="line">    self-&gt;markup[MARKUP_BOLD_ITALIC] = bold_italic;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> self;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// -------------------------------------------------------- console_delete ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_delete( console_t *self )</div>
<div class="line">{</div>
<div class="line">    glDeleteTextures( 1, &amp;self-&gt;atlas-&gt;id );</div>
<div class="line">    self-&gt;atlas-&gt;id = 0;</div>
<div class="line">    <a id="a28" name="a28"></a><a class="code hl_function" href="group__texture-atlas.html#gac3fc1f3aaa1a18945bd1883aa18fb7ef">texture_atlas_delete</a>( self-&gt;atlas );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ----------------------------------------------------- console_add_glyph ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_add_glyph( console_t *self,</div>
<div class="line">                   <span class="keywordtype">char</span>* current,</div>
<div class="line">                   <span class="keywordtype">char</span>* previous,</div>
<div class="line">                   <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> *markup )</div>
<div class="line">{</div>
<div class="line">    <a id="_a29" name="_a29"></a><a class="code hl_struct" href="structtexture__glyph__t.html">texture_glyph_t</a> *glyph  = <a id="a30" name="a30"></a><a class="code hl_function" href="group__texture-font.html#gace04a4fa0a2e60f7a1ff52916ef60c76">texture_font_get_glyph</a>( markup-&gt;<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>, current );</div>
<div class="line">    <span class="keywordflow">if</span>( previous )</div>
<div class="line">    {</div>
<div class="line">        self-&gt;pen.x += <a id="a31" name="a31"></a><a class="code hl_function" href="group__texture-font.html#ga826a5f0394ab5089cec2df75f002c200">texture_glyph_get_kerning</a>( glyph, previous );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">float</span> r = markup-&gt;<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a>;</div>
<div class="line">    <span class="keywordtype">float</span> g = markup-&gt;<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a>;</div>
<div class="line">    <span class="keywordtype">float</span> b = markup-&gt;<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a>;</div>
<div class="line">    <span class="keywordtype">float</span> a = markup-&gt;<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a id="a32" name="a32"></a><a class="code hl_variable" href="unionvec4.html#ac1c847c2cd65c10fd059fceb8e57a5f6">a</a>;</div>
<div class="line">    <span class="keywordtype">int</span> x0  = self-&gt;pen.x + glyph-&gt;<a id="a33" name="a33"></a><a class="code hl_variable" href="structtexture__glyph__t.html#a1f267cdba6bd1aff244ff72792ab1a38">offset_x</a>;</div>
<div class="line">    <span class="keywordtype">int</span> y0  = self-&gt;pen.y + glyph-&gt;<a id="a34" name="a34"></a><a class="code hl_variable" href="structtexture__glyph__t.html#aeacd07f592dfa953f26b2e5c1863a814">offset_y</a>;</div>
<div class="line">    <span class="keywordtype">int</span> x1  = x0 + glyph-&gt;<a id="a35" name="a35"></a><a class="code hl_variable" href="structtexture__glyph__t.html#a51379921bd46b454fc56b7d28381af03">width</a>;</div>
<div class="line">    <span class="keywordtype">int</span> y1  = y0 - glyph-&gt;<a id="a36" name="a36"></a><a class="code hl_variable" href="structtexture__glyph__t.html#a7a0e2fc48006cf6815e5b1e7dae8d386">height</a>;</div>
<div class="line">    <span class="keywordtype">float</span> s0 = glyph-&gt;<a id="a37" name="a37"></a><a class="code hl_variable" href="structtexture__glyph__t.html#adcfb6e5a1b583f96c96d87b006667f2b">s0</a>;</div>
<div class="line">    <span class="keywordtype">float</span> t0 = glyph-&gt;<a id="a38" name="a38"></a><a class="code hl_variable" href="structtexture__glyph__t.html#ab2fec7dd584f5cfaf14c3b8a807d5e70">t0</a>;</div>
<div class="line">    <span class="keywordtype">float</span> s1 = glyph-&gt;<a id="a39" name="a39"></a><a class="code hl_variable" href="structtexture__glyph__t.html#a3849b83a8bb51a6fc32ce77b485d9e95">s1</a>;</div>
<div class="line">    <span class="keywordtype">float</span> t1 = glyph-&gt;<a id="a40" name="a40"></a><a class="code hl_variable" href="structtexture__glyph__t.html#aee3ba35a29e1646df9cfaca6c0db3488">t1</a>;</div>
<div class="line"> </div>
<div class="line">    GLuint indices[] = {0,1,2, 0,2,3};</div>
<div class="line">    vertex_t vertices[] = { { x0,y0,0,  s0,t0,  r,g,b,a },</div>
<div class="line">                            { x0,y1,0,  s0,t1,  r,g,b,a },</div>
<div class="line">                            { x1,y1,0,  s1,t1,  r,g,b,a },</div>
<div class="line">                            { x1,y0,0,  s1,t0,  r,g,b,a } };</div>
<div class="line">    <a id="a41" name="a41"></a><a class="code hl_function" href="group__vertex-buffer.html#gaab916cbe78d2e63dbbc5c7f6d4e28b49">vertex_buffer_push_back</a>( self-&gt;buffer, vertices, 4, indices, 6 );</div>
<div class="line"> </div>
<div class="line">    self-&gt;pen.x += glyph-&gt;<a id="a42" name="a42"></a><a class="code hl_variable" href="structtexture__glyph__t.html#aba3ece1130e9d96562a5c2ec3e60da4c">advance_x</a>;</div>
<div class="line">    self-&gt;pen.y += glyph-&gt;<a id="a43" name="a43"></a><a class="code hl_variable" href="structtexture__glyph__t.html#a1e13821e9ea8332f828ebb95aeefac06">advance_y</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// -------------------------------------------------------- console_render ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_render( console_t *self )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span>* cur_char;</div>
<div class="line">    <span class="keywordtype">char</span>* prev_char;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> viewport[4];</div>
<div class="line">    glGetIntegerv( GL_VIEWPORT, viewport );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> i, index;</div>
<div class="line">    self-&gt;pen.x = 0;</div>
<div class="line">    self-&gt;pen.y = viewport[3];</div>
<div class="line">    <a id="a44" name="a44"></a><a class="code hl_function" href="group__vertex-buffer.html#ga5a1c907e3e66b12be0c142e6d03acdaf">vertex_buffer_clear</a>( console-&gt;buffer );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> cursor_x = self-&gt;pen.x;</div>
<div class="line">    <span class="keywordtype">int</span> cursor_y = self-&gt;pen.y;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structmarkup__t.html">markup_t</a> markup;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// console_t buffer</span></div>
<div class="line">    markup = self-&gt;markup[MARKUP_FAINT];</div>
<div class="line">    self-&gt;pen.y -= markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a id="a45" name="a45"></a><a class="code hl_variable" href="structtexture__font__t.html#a8bd92ddb4c8e456aac6a21f6c268b360">height</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>( i=0; i&lt;self-&gt;lines-&gt;size; ++i )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span> *text = * (<span class="keywordtype">char</span> **) <a id="a46" name="a46"></a><a class="code hl_function" href="group__vector.html#gad9f12b6dade3126fa6782d6afb4fe8d4">vector_get</a>( self-&gt;lines, i ) ;</div>
<div class="line">        <span class="keywordflow">if</span>( strlen(text) &gt; 0 )</div>
<div class="line">        {</div>
<div class="line">            cur_char = text;</div>
<div class="line">            prev_char = NULL;</div>
<div class="line">            console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">            prev_char = cur_char;</div>
<div class="line">            <span class="keywordflow">for</span>( index=1; index &lt; strlen(text)-1; ++index )</div>
<div class="line">            {</div>
<div class="line">                cur_char = text + index;</div>
<div class="line">                console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">                prev_char = cur_char;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        self-&gt;pen.y -= markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a class="code hl_variable" href="structtexture__font__t.html#a8bd92ddb4c8e456aac6a21f6c268b360">height</a> - markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a id="a47" name="a47"></a><a class="code hl_variable" href="structtexture__font__t.html#af40d45f0616a523d97206e6e0e72f421">linegap</a>;</div>
<div class="line">        self-&gt;pen.x = 0;</div>
<div class="line">        cursor_x = self-&gt;pen.x;</div>
<div class="line">        cursor_y = self-&gt;pen.y;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Prompt</span></div>
<div class="line">    markup = self-&gt;markup[MARKUP_BOLD];</div>
<div class="line">    <span class="keywordflow">if</span>( strlen( self-&gt;prompt ) &gt; 0 )</div>
<div class="line">    {</div>
<div class="line">        cur_char = self-&gt;prompt;</div>
<div class="line">        prev_char = NULL;</div>
<div class="line">        console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">        prev_char = cur_char;</div>
<div class="line">        <span class="keywordflow">for</span>( index=1; index &lt; strlen(self-&gt;prompt); ++index )</div>
<div class="line">        {</div>
<div class="line">            cur_char = self-&gt;prompt + index;</div>
<div class="line">            console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">            prev_char = cur_char;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    cursor_x = (int) self-&gt;pen.x;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Input</span></div>
<div class="line">    markup = self-&gt;markup[MARKUP_NORMAL];</div>
<div class="line">    <span class="keywordflow">if</span>( strlen(self-&gt;input) &gt; 0 )</div>
<div class="line">    {</div>
<div class="line">        cur_char = self-&gt;input;</div>
<div class="line">        prev_char = NULL;</div>
<div class="line">        console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">        prev_char = cur_char;</div>
<div class="line">        <span class="keywordflow">if</span>( self-&gt;cursor &gt; 0)</div>
<div class="line">        {</div>
<div class="line">            cursor_x = (int) self-&gt;pen.x;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span>( index=1; index &lt; strlen(self-&gt;input); ++index )</div>
<div class="line">        {</div>
<div class="line">            cur_char = self-&gt;input + index;</div>
<div class="line">            console_add_glyph( console, cur_char, prev_char, &amp;markup );</div>
<div class="line">            prev_char = cur_char;</div>
<div class="line">            <span class="keywordflow">if</span>( index &lt; self-&gt;cursor )</div>
<div class="line">            {</div>
<div class="line">                cursor_x = (int) self-&gt;pen.x;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( self-&gt;lines-&gt;size || self-&gt;prompt[0] != <span class="charliteral">&#39;\0&#39;</span> || self-&gt;input[0] != <span class="charliteral">&#39;\0&#39;</span> )</div>
<div class="line">    {</div>
<div class="line">        glBindTexture( GL_TEXTURE_2D, self-&gt;atlas-&gt;id );</div>
<div class="line">        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );</div>
<div class="line">        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );</div>
<div class="line">        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );</div>
<div class="line">        glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );</div>
<div class="line">        glTexImage2D( GL_TEXTURE_2D, 0, GL_RED, self-&gt;atlas-&gt;width,</div>
<div class="line">                      self-&gt;atlas-&gt;height, 0, GL_RED, GL_UNSIGNED_BYTE,</div>
<div class="line">                      self-&gt;atlas-&gt;data );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cursor (we use the black character (NULL) as texture )</span></div>
<div class="line">    <a class="code hl_struct" href="structtexture__glyph__t.html">texture_glyph_t</a> *glyph  = <a class="code hl_function" href="group__texture-font.html#gace04a4fa0a2e60f7a1ff52916ef60c76">texture_font_get_glyph</a>( markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>, NULL );</div>
<div class="line">    <span class="keywordtype">float</span> r = markup.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">r</a>;</div>
<div class="line">    <span class="keywordtype">float</span> g = markup.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">g</a>;</div>
<div class="line">    <span class="keywordtype">float</span> b = markup.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">b</a>;</div>
<div class="line">    <span class="keywordtype">float</span> a = markup.<a class="code hl_variable" href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">foreground_color</a>.<a class="code hl_variable" href="unionvec4.html#ac1c847c2cd65c10fd059fceb8e57a5f6">a</a>;</div>
<div class="line">    <span class="keywordtype">int</span> x0  = cursor_x+1;</div>
<div class="line">    <span class="keywordtype">int</span> y0  = cursor_y + markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a id="a48" name="a48"></a><a class="code hl_variable" href="structtexture__font__t.html#af310fa623576a8436bff9354f9a5c048">descender</a>;</div>
<div class="line">    <span class="keywordtype">int</span> x1  = cursor_x+2;</div>
<div class="line">    <span class="keywordtype">int</span> y1  = y0 + markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a class="code hl_variable" href="structtexture__font__t.html#a8bd92ddb4c8e456aac6a21f6c268b360">height</a> - markup.<a class="code hl_variable" href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">font</a>-&gt;<a class="code hl_variable" href="structtexture__font__t.html#af40d45f0616a523d97206e6e0e72f421">linegap</a>;</div>
<div class="line">    <span class="keywordtype">float</span> s0 = glyph-&gt;<a class="code hl_variable" href="structtexture__glyph__t.html#adcfb6e5a1b583f96c96d87b006667f2b">s0</a>;</div>
<div class="line">    <span class="keywordtype">float</span> t0 = glyph-&gt;<a class="code hl_variable" href="structtexture__glyph__t.html#ab2fec7dd584f5cfaf14c3b8a807d5e70">t0</a>;</div>
<div class="line">    <span class="keywordtype">float</span> s1 = glyph-&gt;<a class="code hl_variable" href="structtexture__glyph__t.html#a3849b83a8bb51a6fc32ce77b485d9e95">s1</a>;</div>
<div class="line">    <span class="keywordtype">float</span> t1 = glyph-&gt;<a class="code hl_variable" href="structtexture__glyph__t.html#aee3ba35a29e1646df9cfaca6c0db3488">t1</a>;</div>
<div class="line">    GLuint indices[] = {0,1,2, 0,2,3};</div>
<div class="line">    vertex_t vertices[] = { { x0,y0,0,  s0,t0,  r,g,b,a },</div>
<div class="line">                            { x0,y1,0,  s0,t1,  r,g,b,a },</div>
<div class="line">                            { x1,y1,0,  s1,t1,  r,g,b,a },</div>
<div class="line">                            { x1,y0,0,  s1,t0,  r,g,b,a } };</div>
<div class="line">    <a class="code hl_function" href="group__vertex-buffer.html#gaab916cbe78d2e63dbbc5c7f6d4e28b49">vertex_buffer_push_back</a>( self-&gt;buffer, vertices, 4, indices, 6 );</div>
<div class="line">    glEnable( GL_TEXTURE_2D );</div>
<div class="line"> </div>
<div class="line">    glUseProgram( shader );</div>
<div class="line">    {</div>
<div class="line">        glUniform1i( glGetUniformLocation( shader, <span class="stringliteral">&quot;texture&quot;</span> ),</div>
<div class="line">                     0 );</div>
<div class="line">        glUniformMatrix4fv( glGetUniformLocation( shader, <span class="stringliteral">&quot;model&quot;</span> ),</div>
<div class="line">                            1, 0, model.data);</div>
<div class="line">        glUniformMatrix4fv( glGetUniformLocation( shader, <span class="stringliteral">&quot;view&quot;</span> ),</div>
<div class="line">                            1, 0, view.data);</div>
<div class="line">        glUniformMatrix4fv( glGetUniformLocation( shader, <span class="stringliteral">&quot;projection&quot;</span> ),</div>
<div class="line">                            1, 0, projection.data);</div>
<div class="line">        <a id="a49" name="a49"></a><a class="code hl_function" href="group__vertex-buffer.html#ga15748e713c679f8a8cc1c4292a044049">vertex_buffer_render</a>( console-&gt;buffer, GL_TRIANGLES );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- console_connect ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_connect( console_t *self,</div>
<div class="line">                  <span class="keyword">const</span> <span class="keywordtype">char</span> *signal,</div>
<div class="line">                  <span class="keywordtype">void</span> (*handler)(console_t *, <span class="keywordtype">char</span> *))</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( strcmp( signal,<span class="stringliteral">&quot;activate&quot;</span> ) == 0 )</div>
<div class="line">    {</div>
<div class="line">        self-&gt;handlers[__SIGNAL_ACTIVATE__] = handler;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( signal,<span class="stringliteral">&quot;complete&quot;</span> ) == 0 )</div>
<div class="line">    {</div>
<div class="line">        self-&gt;handlers[__SIGNAL_COMPLETE__] = handler;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( signal,<span class="stringliteral">&quot;history-next&quot;</span> ) == 0 )</div>
<div class="line">    {</div>
<div class="line">        self-&gt;handlers[__SIGNAL_HISTORY_NEXT__] = handler;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( signal,<span class="stringliteral">&quot;history-prev&quot;</span> ) == 0 )</div>
<div class="line">    {</div>
<div class="line">        self-&gt;handlers[__SIGNAL_HISTORY_PREV__] = handler;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// --------------------------------------------------------- console_print ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_print( console_t *self, <span class="keywordtype">char</span> *text )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Make sure there is at least one line</span></div>
<div class="line">    <span class="keywordflow">if</span>( self-&gt;lines-&gt;size == 0 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span> *line = strdup( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">        <a id="a50" name="a50"></a><a class="code hl_function" href="group__vector.html#ga0934c3049233d3688b7fa74e23536bbf">vector_push_back</a>( self-&gt;lines, &amp;line );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Make sure last line does not end with &#39;\n&#39;</span></div>
<div class="line">    <span class="keywordtype">char</span> *last_line = *(<span class="keywordtype">char</span> **) <a class="code hl_function" href="group__vector.html#gad9f12b6dade3126fa6782d6afb4fe8d4">vector_get</a>( self-&gt;lines, self-&gt;lines-&gt;size-1 ) ;</div>
<div class="line">    <span class="keywordflow">if</span>( strlen( last_line ) != 0 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( last_line[strlen( last_line ) - 1] == <span class="charliteral">&#39;\n&#39;</span> )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">char</span> *line = strdup( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">            <a class="code hl_function" href="group__vector.html#ga0934c3049233d3688b7fa74e23536bbf">vector_push_back</a>( self-&gt;lines, &amp;line );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    last_line = *(<span class="keywordtype">char</span> **) <a class="code hl_function" href="group__vector.html#gad9f12b6dade3126fa6782d6afb4fe8d4">vector_get</a>( self-&gt;lines, self-&gt;lines-&gt;size-1 ) ;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">char</span> *start = text;</div>
<div class="line">    <span class="keywordtype">char</span> *end   = strchr(start, <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line">    <span class="keywordtype">size_t</span> len = strlen( last_line );</div>
<div class="line">    <span class="keywordflow">if</span>( end != NULL)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span> *line = (<span class="keywordtype">char</span> *) malloc( (len + end - start + 2)*<span class="keyword">sizeof</span>( char ) );</div>
<div class="line">        strncpy( line, last_line, len );</div>
<div class="line">        strncpy( line + len, text, end-start+1 );</div>
<div class="line"> </div>
<div class="line">        line[len+end-start+1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"> </div>
<div class="line">        <a id="a51" name="a51"></a><a class="code hl_function" href="group__vector.html#ga50c566682c6ec48ef8f7f4224c112d03">vector_set</a>( self-&gt;lines, self-&gt;lines-&gt;size-1, &amp;line );</div>
<div class="line">        free( last_line );</div>
<div class="line">        <span class="keywordflow">if</span>( (end-start)  &lt; (strlen( text )-1) )</div>
<div class="line">        {</div>
<div class="line">            console_print(self, end+1 );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">char</span> *line = (<span class="keywordtype">char</span> *) malloc( (len + strlen(text) + 1) * <span class="keyword">sizeof</span>( char ) );</div>
<div class="line">        strncpy( line, last_line, len );</div>
<div class="line">        strcpy( line + len, text );</div>
<div class="line">        <a class="code hl_function" href="group__vector.html#ga50c566682c6ec48ef8f7f4224c112d03">vector_set</a>( self-&gt;lines, self-&gt;lines-&gt;size-1, &amp;line );</div>
<div class="line">        free( last_line );</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- console_process ---</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">console_process( console_t *self,</div>
<div class="line">                  <span class="keyword">const</span> <span class="keywordtype">char</span> *action,</div>
<div class="line">                  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> key )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">size_t</span> len = strlen(self-&gt;input);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( strcmp(action, <span class="stringliteral">&quot;type&quot;</span>) == 0 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( len &lt; MAX_LINE_LENGTH )</div>
<div class="line">        {</div>
<div class="line">            memmove( self-&gt;input + self-&gt;cursor+1,</div>
<div class="line">                     self-&gt;input + self-&gt;cursor,</div>
<div class="line">                     (len - self-&gt;cursor+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) );</div>
<div class="line">            self-&gt;input[self-&gt;cursor] = key;</div>
<div class="line">            self-&gt;cursor++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Input buffer is full\n&quot;</span> );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;enter&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( console-&gt;handlers[__SIGNAL_ACTIVATE__] )</div>
<div class="line">            {</div>
<div class="line">                (*console-&gt;handlers[__SIGNAL_ACTIVATE__])(console, console-&gt;input);</div>
<div class="line">            }</div>
<div class="line">            console_print( self, self-&gt;prompt );</div>
<div class="line">            console_print( self, self-&gt;input );</div>
<div class="line">            console_print( self, <span class="stringliteral">&quot;\n&quot;</span> );</div>
<div class="line">            self-&gt;input[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">            self-&gt;cursor = 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;right&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( self-&gt;cursor &lt; strlen(self-&gt;input) )</div>
<div class="line">            {</div>
<div class="line">                self-&gt;cursor += 1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;left&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( self-&gt;cursor &gt; 0 )</div>
<div class="line">            {</div>
<div class="line">                self-&gt;cursor -= 1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;delete&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            memmove( self-&gt;input + self-&gt;cursor,</div>
<div class="line">                     self-&gt;input + self-&gt;cursor+1,</div>
<div class="line">                     (len - self-&gt;cursor)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;backspace&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( self-&gt;cursor &gt; 0 )</div>
<div class="line">            {</div>
<div class="line">                memmove( self-&gt;input + self-&gt;cursor-1,</div>
<div class="line">                         self-&gt;input + self-&gt;cursor,</div>
<div class="line">                         (len - self-&gt;cursor+1)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) );</div>
<div class="line">                self-&gt;cursor--;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;kill&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( self-&gt;cursor &lt; len )</div>
<div class="line">            {</div>
<div class="line">                strcpy(self-&gt;killring, self-&gt;input);</div>
<div class="line">                self-&gt;input[self-&gt;cursor] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Kill ring: %s\n&quot;</span>, self-&gt;killring);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;yank&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">size_t</span> l = strlen(self-&gt;killring);</div>
<div class="line">            <span class="keywordflow">if</span>( (len + l) &lt; MAX_LINE_LENGTH )</div>
<div class="line">            {</div>
<div class="line">                memmove( self-&gt;input + self-&gt;cursor + l,</div>
<div class="line">                         self-&gt;input + self-&gt;cursor,</div>
<div class="line">                         (len - self-&gt;cursor)*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) );</div>
<div class="line">                memcpy( self-&gt;input + self-&gt;cursor,</div>
<div class="line">                        self-&gt;killring, l*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div>
<div class="line">                self-&gt;cursor += l;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;home&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            self-&gt;cursor = 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;end&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            self-&gt;cursor = strlen( self-&gt;input );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;clear&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;history-prev&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( console-&gt;handlers[__SIGNAL_HISTORY_PREV__] )</div>
<div class="line">            {</div>
<div class="line">                (*console-&gt;handlers[__SIGNAL_HISTORY_PREV__])( console, console-&gt;input );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;history-next&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( console-&gt;handlers[__SIGNAL_HISTORY_NEXT__] )</div>
<div class="line">            {</div>
<div class="line">                (*console-&gt;handlers[__SIGNAL_HISTORY_NEXT__])( console, console-&gt;input );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( strcmp( action, <span class="stringliteral">&quot;complete&quot;</span> ) == 0 )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>( console-&gt;handlers[__SIGNAL_COMPLETE__] )</div>
<div class="line">            {</div>
<div class="line">                (*console-&gt;handlers[__SIGNAL_COMPLETE__])( console, console-&gt;input );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- console activate ---</span></div>
<div class="line"><span class="keywordtype">void</span> console_activate( console_t *self, <span class="keywordtype">char</span> *input )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">//console_print( self, &quot;Activate callback\n&quot; );</span></div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;Activate callback : %s\n&quot;</span>, input );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------- console complete ---</span></div>
<div class="line"><span class="keywordtype">void</span> console_complete( console_t *self, <span class="keywordtype">char</span> *input )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// console_print( self, &quot;Complete callback\n&quot; );</span></div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;Complete callback : %s\n&quot;</span>, input );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ----------------------------------------------- console previous history ---</span></div>
<div class="line"><span class="keywordtype">void</span> console_history_prev( console_t *self, <span class="keywordtype">char</span> *input )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// console_print( self, &quot;History prev callback\n&quot; );</span></div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;History prev callback : %s\n&quot;</span>, input );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// --------------------------------------------------- console next history ---</span></div>
<div class="line"><span class="keywordtype">void</span> console_history_next( console_t *self, <span class="keywordtype">char</span> *input )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// console_print( self, &quot;History next callback\n&quot; );</span></div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;History next callback : %s\n&quot;</span>, input );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------------------- init ---</span></div>
<div class="line"><span class="keywordtype">void</span> init( <span class="keywordtype">float</span> font_size )</div>
<div class="line">{</div>
<div class="line">    control_key_handled = 0;</div>
<div class="line"> </div>
<div class="line">    console = console_new( font_size );</div>
<div class="line">    console_print( console,</div>
<div class="line">                   <span class="stringliteral">&quot;OpenGL Freetype console\n&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot;Copyright 2011 Nicolas P. Rougier. All rights reserved.\n \n&quot;</span> );</div>
<div class="line">    console_connect( console, <span class="stringliteral">&quot;activate&quot;</span>,     console_activate );</div>
<div class="line">    console_connect( console, <span class="stringliteral">&quot;complete&quot;</span>,     console_complete );</div>
<div class="line">    console_connect( console, <span class="stringliteral">&quot;history-prev&quot;</span>, console_history_prev );</div>
<div class="line">    console_connect( console, <span class="stringliteral">&quot;history-next&quot;</span>, console_history_next );</div>
<div class="line"> </div>
<div class="line">    glClearColor( 1.00, 1.00, 1.00, 1.00 );</div>
<div class="line">    glDisable( GL_DEPTH_TEST );</div>
<div class="line">    glBlendFunc( GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA );</div>
<div class="line">    glEnable( GL_TEXTURE_2D );</div>
<div class="line">    glEnable( GL_BLEND );</div>
<div class="line"> </div>
<div class="line">    shader = shader_load(<span class="stringliteral">&quot;shaders/v3f-t2f-c4f.vert&quot;</span>,</div>
<div class="line">                         <span class="stringliteral">&quot;shaders/v3f-t2f-c4f.frag&quot;</span>);</div>
<div class="line">    mat4_set_identity( &amp;projection );</div>
<div class="line">    mat4_set_identity( &amp;model );</div>
<div class="line">    mat4_set_identity( &amp;view );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ---------------------------------------------------------------- display ---</span></div>
<div class="line"><span class="keywordtype">void</span> display( GLFWwindow* window )</div>
<div class="line">{</div>
<div class="line">    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</div>
<div class="line">    console_render( console );</div>
<div class="line">    glfwSwapBuffers( window );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ---------------------------------------------------------------- reshape ---</span></div>
<div class="line"><span class="keywordtype">void</span> reshape( GLFWwindow* window, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height )</div>
<div class="line">{</div>
<div class="line">    glViewport(0, 0, width, height);</div>
<div class="line">    mat4_set_orthographic( &amp;projection, 0, width, 0, height, -1, 1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ----------------------------------------------------------- on char input ---</span></div>
<div class="line"><span class="keywordtype">void</span> char_input( GLFWwindow* window, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cp )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( control_key_handled )</div>
<div class="line">    {</div>
<div class="line">        control_key_handled = 0;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    console_process( console, <span class="stringliteral">&quot;type&quot;</span>, cp );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// --------------------------------------------------------------- keyboard ---</span></div>
<div class="line"><span class="keywordtype">void</span> keyboard( GLFWwindow* window, <span class="keywordtype">int</span> key, <span class="keywordtype">int</span> scancode, <span class="keywordtype">int</span> action, <span class="keywordtype">int</span> mods )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>( GLFW_PRESS != action &amp;&amp; GLFW_REPEAT != action )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>( key )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_HOME:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;home&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_DELETE:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;delete&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_END:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;end&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_BACKSPACE:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;backspace&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_TAB:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;complete&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_ENTER:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;enter&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_ESCAPE:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;escape&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_UP:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;history-prev&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_DOWN:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;history-next&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_LEFT:</div>
<div class="line">            console_process( console,  <span class="stringliteral">&quot;left&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_RIGHT:</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;right&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>( ( GLFW_MOD_CONTROL &amp; mods ) == 0 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span>( key )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_K:</div>
<div class="line">            control_key_handled = 1;</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;kill&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_L:</div>
<div class="line">            control_key_handled = 1;</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;clear&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> GLFW_KEY_Y:</div>
<div class="line">            control_key_handled = 1;</div>
<div class="line">            console_process( console, <span class="stringliteral">&quot;yank&quot;</span>, 0 );</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// --------------------------------------------------------- error-callback ---</span></div>
<div class="line"><span class="keywordtype">void</span> error_callback( <span class="keywordtype">int</span> error, <span class="keyword">const</span> <span class="keywordtype">char</span>* description )</div>
<div class="line">{</div>
<div class="line">    fputs( description, stderr );</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// ------------------------------------------------------------------- main ---</span></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv )</div>
<div class="line">{</div>
<div class="line">    GLFWwindow* window;</div>
<div class="line">    <span class="keywordtype">char</span>* screenshot_path = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc &gt; 1)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (argc == 3 &amp;&amp; 0 == strcmp( <span class="stringliteral">&quot;--screenshot&quot;</span>, argv[1] ))</div>
<div class="line">            screenshot_path = argv[2];</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Unknown or incomplete parameters given\n&quot;</span> );</div>
<div class="line">            exit( EXIT_FAILURE );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    glfwSetErrorCallback( error_callback );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!glfwInit( ))</div>
<div class="line">    {</div>
<div class="line">        exit( EXIT_FAILURE );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    glfwWindowHint( GLFW_VISIBLE, GL_FALSE );</div>
<div class="line">    glfwWindowHint( GLFW_RESIZABLE, GL_FALSE );</div>
<div class="line"> </div>
<div class="line">    window = glfwCreateWindow( 600,400, argv[0], NULL, NULL );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!window)</div>
<div class="line">    {</div>
<div class="line">        glfwTerminate( );</div>
<div class="line">        exit( EXIT_FAILURE );</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    glfwMakeContextCurrent( window );</div>
<div class="line">    glfwSwapInterval( 1 );</div>
<div class="line"> </div>
<div class="line">    glfwSetFramebufferSizeCallback( window, reshape );</div>
<div class="line">    glfwSetWindowRefreshCallback( window, display );</div>
<div class="line">    glfwSetKeyCallback( window, keyboard );</div>
<div class="line">    glfwSetCharCallback( window, char_input );</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef __APPLE__</span></div>
<div class="line">    glewExperimental = GL_TRUE;</div>
<div class="line">    GLenum err = glewInit();</div>
<div class="line">    <span class="keywordflow">if</span> (GLEW_OK != err)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* Problem: glewInit failed, something is seriously wrong. */</span></div>
<div class="line">        fprintf( stderr, <span class="stringliteral">&quot;Error: %s\n&quot;</span>, glewGetErrorString(err) );</div>
<div class="line">        exit( EXIT_FAILURE );</div>
<div class="line">    }</div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;Using GLEW %s\n&quot;</span>, glewGetString(GLEW_VERSION) );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    glfwShowWindow( window );</div>
<div class="line">    <span class="keywordtype">int</span> pixWidth, pixHeight;</div>
<div class="line">    glfwGetFramebufferSize( window, &amp;pixWidth, &amp;pixHeight );</div>
<div class="line"> </div>
<div class="line">    init( 13.0 * pixWidth / 600 );</div>
<div class="line"> </div>
<div class="line">    reshape( window, pixWidth, pixHeight );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!glfwWindowShouldClose( window ))</div>
<div class="line">    {</div>
<div class="line">        display( window );</div>
<div class="line">        glfwPollEvents( );</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (screenshot_path)</div>
<div class="line">        {</div>
<div class="line">            screenshot( window, screenshot_path );</div>
<div class="line">            glfwSetWindowShouldClose( window, 1 );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    console_delete( console );</div>
<div class="line"> </div>
<div class="line">    glfwDestroyWindow( window );</div>
<div class="line">    glfwTerminate( );</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__texture-atlas_html_ga92a71345a425496a07143068a99d8a0b"><div class="ttname"><a href="group__texture-atlas.html#ga92a71345a425496a07143068a99d8a0b">texture_atlas_new</a></div><div class="ttdeci">texture_atlas_t * texture_atlas_new(const size_t width, const size_t height, const size_t depth)</div><div class="ttdoc">Creates a new empty texture atlas.</div></div>
<div class="ttc" id="agroup__texture-atlas_html_gac3fc1f3aaa1a18945bd1883aa18fb7ef"><div class="ttname"><a href="group__texture-atlas.html#gac3fc1f3aaa1a18945bd1883aa18fb7ef">texture_atlas_delete</a></div><div class="ttdeci">void texture_atlas_delete(texture_atlas_t *self)</div><div class="ttdoc">Deletes a texture atlas.</div></div>
<div class="ttc" id="agroup__texture-font_html_ga329116810bb25cd8964430f5477d90d6"><div class="ttname"><a href="group__texture-font.html#ga329116810bb25cd8964430f5477d90d6">texture_font_new_from_file</a></div><div class="ttdeci">texture_font_t * texture_font_new_from_file(texture_atlas_t *atlas, const float pt_size, const char *filename)</div><div class="ttdoc">This function creates a new texture font from given filename and size.</div></div>
<div class="ttc" id="agroup__texture-font_html_ga826a5f0394ab5089cec2df75f002c200"><div class="ttname"><a href="group__texture-font.html#ga826a5f0394ab5089cec2df75f002c200">texture_glyph_get_kerning</a></div><div class="ttdeci">float texture_glyph_get_kerning(const texture_glyph_t *self, const char *codepoint)</div><div class="ttdoc">Get the kerning between two horizontal glyphs.</div></div>
<div class="ttc" id="agroup__texture-font_html_gace04a4fa0a2e60f7a1ff52916ef60c76"><div class="ttname"><a href="group__texture-font.html#gace04a4fa0a2e60f7a1ff52916ef60c76">texture_font_get_glyph</a></div><div class="ttdeci">texture_glyph_t * texture_font_get_glyph(texture_font_t *self, const char *codepoint)</div><div class="ttdoc">Request a new glyph from the font.</div></div>
<div class="ttc" id="agroup__vector_html_ga0934c3049233d3688b7fa74e23536bbf"><div class="ttname"><a href="group__vector.html#ga0934c3049233d3688b7fa74e23536bbf">vector_push_back</a></div><div class="ttdeci">void vector_push_back(vector_t *self, const void *item)</div><div class="ttdoc">Appends given item to the end of the vector.</div></div>
<div class="ttc" id="agroup__vector_html_ga26e06c009f42cd16a41a8d33ef005e97"><div class="ttname"><a href="group__vector.html#ga26e06c009f42cd16a41a8d33ef005e97">vector_new</a></div><div class="ttdeci">vector_t * vector_new(size_t item_size)</div><div class="ttdoc">Creates a new empty vector.</div></div>
<div class="ttc" id="agroup__vector_html_ga50c566682c6ec48ef8f7f4224c112d03"><div class="ttname"><a href="group__vector.html#ga50c566682c6ec48ef8f7f4224c112d03">vector_set</a></div><div class="ttdeci">void vector_set(vector_t *self, const size_t index, const void *item)</div><div class="ttdoc">Replace an item.</div></div>
<div class="ttc" id="agroup__vector_html_gad9f12b6dade3126fa6782d6afb4fe8d4"><div class="ttname"><a href="group__vector.html#gad9f12b6dade3126fa6782d6afb4fe8d4">vector_get</a></div><div class="ttdeci">const void * vector_get(const vector_t *self, size_t index)</div><div class="ttdoc">Returns a pointer to the item located at specified index.</div></div>
<div class="ttc" id="agroup__vertex-buffer_html_ga15748e713c679f8a8cc1c4292a044049"><div class="ttname"><a href="group__vertex-buffer.html#ga15748e713c679f8a8cc1c4292a044049">vertex_buffer_render</a></div><div class="ttdeci">void vertex_buffer_render(vertex_buffer_t *self, GLenum mode)</div><div class="ttdoc">Render vertex buffer.</div></div>
<div class="ttc" id="agroup__vertex-buffer_html_ga5a1c907e3e66b12be0c142e6d03acdaf"><div class="ttname"><a href="group__vertex-buffer.html#ga5a1c907e3e66b12be0c142e6d03acdaf">vertex_buffer_clear</a></div><div class="ttdeci">void vertex_buffer_clear(vertex_buffer_t *self)</div><div class="ttdoc">Clear all items.</div></div>
<div class="ttc" id="agroup__vertex-buffer_html_gaab916cbe78d2e63dbbc5c7f6d4e28b49"><div class="ttname"><a href="group__vertex-buffer.html#gaab916cbe78d2e63dbbc5c7f6d4e28b49">vertex_buffer_push_back</a></div><div class="ttdeci">size_t vertex_buffer_push_back(vertex_buffer_t *self, const void *vertices, const size_t vcount, const GLuint *indices, const size_t icount)</div><div class="ttdoc">Append a new item to the collection.</div></div>
<div class="ttc" id="agroup__vertex-buffer_html_gafb2ecb5aaa71db813080295b9fd06098"><div class="ttname"><a href="group__vertex-buffer.html#gafb2ecb5aaa71db813080295b9fd06098">vertex_buffer_new</a></div><div class="ttdeci">vertex_buffer_t * vertex_buffer_new(const char *format)</div><div class="ttdoc">Creates an empty vertex buffer.</div></div>
<div class="ttc" id="amarkup_8h_html"><div class="ttname"><a href="markup_8h.html">markup.h</a></div></div>
<div class="ttc" id="astructmarkup__t_html"><div class="ttname"><a href="structmarkup__t.html">markup_t</a></div><div class="ttdoc">Simple structure that describes text properties.</div><div class="ttdef"><b>Definition:</b> markup.h:64</div></div>
<div class="ttc" id="astructmarkup__t_html_a04c930fd29432569aee47e56b59e3d79"><div class="ttname"><a href="structmarkup__t.html#a04c930fd29432569aee47e56b59e3d79">markup_t::foreground_color</a></div><div class="ttdeci">vec4 foreground_color</div><div class="ttdoc">Text color.</div><div class="ttdef"><b>Definition:</b> markup.h:98</div></div>
<div class="ttc" id="astructmarkup__t_html_a0ed25bfa8bc6ead84ae5c0e31dadc780"><div class="ttname"><a href="structmarkup__t.html#a0ed25bfa8bc6ead84ae5c0e31dadc780">markup_t::overline_color</a></div><div class="ttdeci">vec4 overline_color</div><div class="ttdoc">Overline color.</div><div class="ttdef"><b>Definition:</b> markup.h:133</div></div>
<div class="ttc" id="astructmarkup__t_html_a188c090aade110f71252dd3f28a4b9c7"><div class="ttname"><a href="structmarkup__t.html#a188c090aade110f71252dd3f28a4b9c7">markup_t::background_color</a></div><div class="ttdeci">vec4 background_color</div><div class="ttdoc">Background color.</div><div class="ttdef"><b>Definition:</b> markup.h:103</div></div>
<div class="ttc" id="astructmarkup__t_html_a1a14c4fb87e2224381288a24f56526c8"><div class="ttname"><a href="structmarkup__t.html#a1a14c4fb87e2224381288a24f56526c8">markup_t::underline_color</a></div><div class="ttdeci">vec4 underline_color</div><div class="ttdoc">Underline color.</div><div class="ttdef"><b>Definition:</b> markup.h:123</div></div>
<div class="ttc" id="astructmarkup__t_html_a29192ea5e970414c0f2b6596e04b822c"><div class="ttname"><a href="structmarkup__t.html#a29192ea5e970414c0f2b6596e04b822c">markup_t::strikethrough_color</a></div><div class="ttdeci">vec4 strikethrough_color</div><div class="ttdoc">Strikethrough color.</div><div class="ttdef"><b>Definition:</b> markup.h:143</div></div>
<div class="ttc" id="astructmarkup__t_html_a2f3767ea0ddd6e83154daad12cc4d2d0"><div class="ttname"><a href="structmarkup__t.html#a2f3767ea0ddd6e83154daad12cc4d2d0">markup_t::bold</a></div><div class="ttdeci">int bold</div><div class="ttdoc">Whether text is bold.</div><div class="ttdef"><b>Definition:</b> markup.h:78</div></div>
<div class="ttc" id="astructmarkup__t_html_a32a7c723e03431ac36ce55a7806783d7"><div class="ttname"><a href="structmarkup__t.html#a32a7c723e03431ac36ce55a7806783d7">markup_t::size</a></div><div class="ttdeci">float size</div><div class="ttdoc">Font size.</div><div class="ttdef"><b>Definition:</b> markup.h:73</div></div>
<div class="ttc" id="astructmarkup__t_html_a343eab20b2c5cb225e4b9969bd034642"><div class="ttname"><a href="structmarkup__t.html#a343eab20b2c5cb225e4b9969bd034642">markup_t::italic</a></div><div class="ttdeci">int italic</div><div class="ttdoc">Whether text is italic.</div><div class="ttdef"><b>Definition:</b> markup.h:83</div></div>
<div class="ttc" id="astructmarkup__t_html_a37164c55ed3ed10f00ce0b2da6b9d2f5"><div class="ttname"><a href="structmarkup__t.html#a37164c55ed3ed10f00ce0b2da6b9d2f5">markup_t::gamma</a></div><div class="ttdeci">float gamma</div><div class="ttdoc">Gamma correction.</div><div class="ttdef"><b>Definition:</b> markup.h:93</div></div>
<div class="ttc" id="astructmarkup__t_html_a5c61d3d8f7da003b885a413780240318"><div class="ttname"><a href="structmarkup__t.html#a5c61d3d8f7da003b885a413780240318">markup_t::font</a></div><div class="ttdeci">texture_font_t * font</div><div class="ttdoc">Pointer on the corresponding font (family/size/bold/italic)</div><div class="ttdef"><b>Definition:</b> markup.h:148</div></div>
<div class="ttc" id="astructmarkup__t_html_a678b7a967e3d8bf13400ed72216f7f88"><div class="ttname"><a href="structmarkup__t.html#a678b7a967e3d8bf13400ed72216f7f88">markup_t::overline</a></div><div class="ttdeci">int overline</div><div class="ttdoc">Whether overline is active.</div><div class="ttdef"><b>Definition:</b> markup.h:128</div></div>
<div class="ttc" id="astructmarkup__t_html_a78e8996a06c5bce517be27cf7339c97c"><div class="ttname"><a href="structmarkup__t.html#a78e8996a06c5bce517be27cf7339c97c">markup_t::strikethrough</a></div><div class="ttdeci">int strikethrough</div><div class="ttdoc">Whether strikethrough is active.</div><div class="ttdef"><b>Definition:</b> markup.h:138</div></div>
<div class="ttc" id="astructmarkup__t_html_a84af8287dddba1d14190dd33f76af955"><div class="ttname"><a href="structmarkup__t.html#a84af8287dddba1d14190dd33f76af955">markup_t::underline</a></div><div class="ttdeci">int underline</div><div class="ttdoc">Whether underline is active.</div><div class="ttdef"><b>Definition:</b> markup.h:118</div></div>
<div class="ttc" id="astructmarkup__t_html_adcb67782935faf6178ef7afde350ca2a"><div class="ttname"><a href="structmarkup__t.html#adcb67782935faf6178ef7afde350ca2a">markup_t::family</a></div><div class="ttdeci">char * family</div><div class="ttdoc">A font family name such as &quot;normal&quot;, &quot;sans&quot;, &quot;serif&quot; or &quot;monospace&quot;.</div><div class="ttdef"><b>Definition:</b> markup.h:68</div></div>
<div class="ttc" id="astructmarkup__t_html_af41c01f5a6be19a30d81a07423186177"><div class="ttname"><a href="structmarkup__t.html#af41c01f5a6be19a30d81a07423186177">markup_t::spacing</a></div><div class="ttdeci">float spacing</div><div class="ttdoc">Spacing between letters.</div><div class="ttdef"><b>Definition:</b> markup.h:88</div></div>
<div class="ttc" id="astructtexture__atlas__t_html"><div class="ttname"><a href="structtexture__atlas__t.html">texture_atlas_t</a></div><div class="ttdoc">A texture atlas is used to pack several small regions into a single texture.</div><div class="ttdef"><b>Definition:</b> texture-atlas.h:77</div></div>
<div class="ttc" id="astructtexture__font__t_html_a8bd92ddb4c8e456aac6a21f6c268b360"><div class="ttname"><a href="structtexture__font__t.html#a8bd92ddb4c8e456aac6a21f6c268b360">texture_font_t::height</a></div><div class="ttdeci">float height</div><div class="ttdoc">This field is simply used to compute a default line spacing (i.e., the baseline-to-baseline distance)...</div><div class="ttdef"><b>Definition:</b> texture-font.h:345</div></div>
<div class="ttc" id="astructtexture__font__t_html_af310fa623576a8436bff9354f9a5c048"><div class="ttname"><a href="structtexture__font__t.html#af310fa623576a8436bff9354f9a5c048">texture_font_t::descender</a></div><div class="ttdeci">float descender</div><div class="ttdoc">The descender is the vertical distance from the horizontal baseline to the lowest 'character' coordin...</div><div class="ttdef"><b>Definition:</b> texture-font.h:373</div></div>
<div class="ttc" id="astructtexture__font__t_html_af40d45f0616a523d97206e6e0e72f421"><div class="ttname"><a href="structtexture__font__t.html#af40d45f0616a523d97206e6e0e72f421">texture_font_t::linegap</a></div><div class="ttdeci">float linegap</div><div class="ttdoc">This field is the distance that must be placed between two lines of text.</div><div class="ttdef"><b>Definition:</b> texture-font.h:352</div></div>
<div class="ttc" id="astructtexture__glyph__t_html"><div class="ttname"><a href="structtexture__glyph__t.html">texture_glyph_t</a></div><div class="ttdoc">A structure that describe a glyph.</div><div class="ttdef"><b>Definition:</b> texture-font.h:113</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_a1e13821e9ea8332f828ebb95aeefac06"><div class="ttname"><a href="structtexture__glyph__t.html#a1e13821e9ea8332f828ebb95aeefac06">texture_glyph_t::advance_y</a></div><div class="ttdeci">float advance_y</div><div class="ttdoc">For vertical text layouts, this is the vertical distance (in fractional pixels) used to increment the...</div><div class="ttdef"><b>Definition:</b> texture-font.h:154</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_a1f267cdba6bd1aff244ff72792ab1a38"><div class="ttname"><a href="structtexture__glyph__t.html#a1f267cdba6bd1aff244ff72792ab1a38">texture_glyph_t::offset_x</a></div><div class="ttdeci">int offset_x</div><div class="ttdoc">Glyph's left bearing expressed in integer pixels.</div><div class="ttdef"><b>Definition:</b> texture-font.h:132</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_a3849b83a8bb51a6fc32ce77b485d9e95"><div class="ttname"><a href="structtexture__glyph__t.html#a3849b83a8bb51a6fc32ce77b485d9e95">texture_glyph_t::s1</a></div><div class="ttdeci">float s1</div><div class="ttdoc">First normalized texture coordinate (x) of bottom-right corner.</div><div class="ttdef"><b>Definition:</b> texture-font.h:169</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_a51379921bd46b454fc56b7d28381af03"><div class="ttname"><a href="structtexture__glyph__t.html#a51379921bd46b454fc56b7d28381af03">texture_glyph_t::width</a></div><div class="ttdeci">size_t width</div><div class="ttdoc">Glyph's width in pixels.</div><div class="ttdef"><b>Definition:</b> texture-font.h:122</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_a7a0e2fc48006cf6815e5b1e7dae8d386"><div class="ttname"><a href="structtexture__glyph__t.html#a7a0e2fc48006cf6815e5b1e7dae8d386">texture_glyph_t::height</a></div><div class="ttdeci">size_t height</div><div class="ttdoc">Glyph's height in pixels.</div><div class="ttdef"><b>Definition:</b> texture-font.h:127</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_ab2fec7dd584f5cfaf14c3b8a807d5e70"><div class="ttname"><a href="structtexture__glyph__t.html#ab2fec7dd584f5cfaf14c3b8a807d5e70">texture_glyph_t::t0</a></div><div class="ttdeci">float t0</div><div class="ttdoc">Second normalized texture coordinate (y) of top-left corner.</div><div class="ttdef"><b>Definition:</b> texture-font.h:164</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_aba3ece1130e9d96562a5c2ec3e60da4c"><div class="ttname"><a href="structtexture__glyph__t.html#aba3ece1130e9d96562a5c2ec3e60da4c">texture_glyph_t::advance_x</a></div><div class="ttdeci">float advance_x</div><div class="ttdoc">For horizontal text layouts, this is the horizontal distance (in fractional pixels) used to increment...</div><div class="ttdef"><b>Definition:</b> texture-font.h:147</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_adcfb6e5a1b583f96c96d87b006667f2b"><div class="ttname"><a href="structtexture__glyph__t.html#adcfb6e5a1b583f96c96d87b006667f2b">texture_glyph_t::s0</a></div><div class="ttdeci">float s0</div><div class="ttdoc">First normalized texture coordinate (x) of top-left corner.</div><div class="ttdef"><b>Definition:</b> texture-font.h:159</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_aeacd07f592dfa953f26b2e5c1863a814"><div class="ttname"><a href="structtexture__glyph__t.html#aeacd07f592dfa953f26b2e5c1863a814">texture_glyph_t::offset_y</a></div><div class="ttdeci">int offset_y</div><div class="ttdoc">Glyphs's top bearing expressed in integer pixels.</div><div class="ttdef"><b>Definition:</b> texture-font.h:140</div></div>
<div class="ttc" id="astructtexture__glyph__t_html_aee3ba35a29e1646df9cfaca6c0db3488"><div class="ttname"><a href="structtexture__glyph__t.html#aee3ba35a29e1646df9cfaca6c0db3488">texture_glyph_t::t1</a></div><div class="ttdeci">float t1</div><div class="ttdoc">Second normalized texture coordinate (y) of bottom-right corner.</div><div class="ttdef"><b>Definition:</b> texture-font.h:174</div></div>
<div class="ttc" id="astructvector__t_html"><div class="ttname"><a href="structvector__t.html">vector_t</a></div><div class="ttdoc">Generic vector structure.</div><div class="ttdef"><b>Definition:</b> vector.h:58</div></div>
<div class="ttc" id="astructvertex__buffer__t_html"><div class="ttname"><a href="structvertex__buffer__t.html">vertex_buffer_t</a></div><div class="ttdoc">Generic vertex buffer.</div><div class="ttdef"><b>Definition:</b> vertex-buffer.h:36</div></div>
<div class="ttc" id="aunionvec2_html"><div class="ttname"><a href="unionvec2.html">vec2</a></div><div class="ttdoc">Tuple of 2 floats.</div><div class="ttdef"><b>Definition:</b> vec234.h:193</div></div>
<div class="ttc" id="aunionvec4_html"><div class="ttname"><a href="unionvec4.html">vec4</a></div><div class="ttdoc">Tuple of 4 floats.</div><div class="ttdef"><b>Definition:</b> vec234.h:127</div></div>
<div class="ttc" id="aunionvec4_html_a1682827e4304b44e6f768d616cdf3899"><div class="ttname"><a href="unionvec4.html#a1682827e4304b44e6f768d616cdf3899">vec4::r</a></div><div class="ttdeci">float r</div><div class="ttdoc">Alias for first component.</div><div class="ttdef"><b>Definition:</b> vec234.h:142</div></div>
<div class="ttc" id="aunionvec4_html_a62421478df6548c8e5e24d33345e3417"><div class="ttname"><a href="unionvec4.html#a62421478df6548c8e5e24d33345e3417">vec4::b</a></div><div class="ttdeci">float b</div><div class="ttdoc">Alias for third component</div><div class="ttdef"><b>Definition:</b> vec234.h:144</div></div>
<div class="ttc" id="aunionvec4_html_aa626a2728056a1b410fb8e133bdffd05"><div class="ttname"><a href="unionvec4.html#aa626a2728056a1b410fb8e133bdffd05">vec4::g</a></div><div class="ttdeci">float g</div><div class="ttdoc">Alias for second component.</div><div class="ttdef"><b>Definition:</b> vec234.h:143</div></div>
<div class="ttc" id="aunionvec4_html_ac1c847c2cd65c10fd059fceb8e57a5f6"><div class="ttname"><a href="unionvec4.html#ac1c847c2cd65c10fd059fceb8e57a5f6">vec4::a</a></div><div class="ttdeci">float a</div><div class="ttdoc">Alias for fourth component.</div><div class="ttdef"><b>Definition:</b> vec234.h:145</div></div>
<div class="ttc" id="avertex-buffer_8h_html"><div class="ttname"><a href="vertex-buffer_8h.html">vertex-buffer.h</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div>
</body>
</html>
